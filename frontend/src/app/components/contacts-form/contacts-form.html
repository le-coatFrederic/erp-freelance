<h3>Create / Update contact</h3>
<form [formGroup]="form" (ngSubmit)="submit()">

  <label>Prénom
    <input type="text" formControlName="firstname">
  </label>
  @if (form.controls.firstname.touched && form.controls.firstname.invalid) {
    <small>Prénom requis (min 2 caractères)</small>
  }

  <label>Nom
    <input type="text" formControlName="lastname">
  </label>
  @if (form.controls.lastname.touched && form.controls.lastname.invalid) {
    <small>Nom requis (min 2 caractères)</small>
  }

  <label>Job
    <input type="text" formControlName="job">
  </label>
  @if (form.controls.job.touched && form.controls.job.invalid) {
    <small>Job requis</small>
  }

  <label>Email
    <input type="email" formControlName="email">
  </label>
  @if (form.controls.email.touched && form.controls.email.invalid) {
    <small>Email invalide</small>
  }

  <label>Téléphone
    <input type="text" formControlName="phone">
  </label>

  <label>LinkedIn
    <input type="text" formControlName="linkedin">
  </label>

  <label>Company
    <select formControlName="company_id">
      @for (c of companies(); track c.id) {
        <option [value]="c.id">{{ c.name }}</option>
      }
    </select>
  </label>

  <button type="submit" [disabled]="isSubmitting()">
    @if (isSubmitting()) { Création... } @else { Créer le contact }
  </button>

  @if (error()) {
    <p style="color:red">{{ error() }}</p>
  }

  @if (success()) {
    <p style="color:green">Contact créé avec succès</p>
  }

</form>