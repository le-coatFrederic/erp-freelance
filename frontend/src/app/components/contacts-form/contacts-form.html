<div class="form-container">
  <h3>Create / Update contact</h3>
  <form [formGroup]="form" (ngSubmit)="submit()">

    <div class="form-group">
      <label for="firstname">Prénom</label>
      <input
        type="text"
        id="firstname"
        formControlName="firstname"
        [class.invalid]="form.controls.firstname.touched && form.controls.firstname.invalid"
      >
      @if (form.controls.firstname.touched && form.controls.firstname.invalid) {
        <small class="form-error">Prénom requis (min 2 caractères)</small>
      }
    </div>

    <div class="form-group">
      <label for="lastname">Nom</label>
      <input
        type="text"
        id="lastname"
        formControlName="lastname"
        [class.invalid]="form.controls.lastname.touched && form.controls.lastname.invalid"
      >
      @if (form.controls.lastname.touched && form.controls.lastname.invalid) {
        <small class="form-error">Nom requis (min 2 caractères)</small>
      }
    </div>

    <div class="form-group">
      <label for="job">Job</label>
      <input
        type="text"
        id="job"
        formControlName="job"
        [class.invalid]="form.controls.job.touched && form.controls.job.invalid"
      >
      @if (form.controls.job.touched && form.controls.job.invalid) {
        <small class="form-error">Job requis</small>
      }
    </div>

    <div class="form-group">
      <label for="email">Email</label>
      <input
        type="email"
        id="email"
        formControlName="email"
        [class.invalid]="form.controls.email.touched && form.controls.email.invalid"
      >
      @if (form.controls.email.touched && form.controls.email.invalid) {
        <small class="form-error">Email invalide</small>
      }
    </div>

    <div class="form-group">
      <label for="phone">Téléphone</label>
      <input
        type="text"
        id="phone"
        formControlName="phone"
      >
    </div>

    <div class="form-group">
      <label for="linkedin">LinkedIn</label>
      <input
        type="text"
        id="linkedin"
        formControlName="linkedin"
      >
    </div>

    <div class="form-group">
      <label for="company">Company</label>
      <select
        id="company"
        formControlName="company_id"
      >
        @for (c of companies(); track c.id) {
          <option [value]="c.id">{{ c.name }}</option>
        }
      </select>
    </div>

    <button type="submit" [disabled]="isSubmitting()" class="btn-submit">
      @if (isSubmitting()) { Création... } @else { Créer le contact }
    </button>

    @if (error()) {
      <div class="message message-error">{{ error() }}</div>
    }

    @if (success()) {
      <div class="message message-success">Contact créé avec succès</div>
    }

  </form>
</div>